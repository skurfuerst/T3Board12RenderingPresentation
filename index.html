<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>TypoScript Harmony - T3BOARD12</title>

		<meta name="description" content="An easy to use CSS 3D slideshow tool for quickly creating good looking HTML presentations.">
		<meta name="author" content="Hakim El Hattab">


		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css">

		<link rel="stylesheet" href="lib/zenburn.css">
		<style>
			b {
				color: #F97A00;
			}
			#reveal small {
				vertical-align: initial;
			}
		</style>
		<script src="lib/jquery.1.7.1.min.js"></script>
		<script src="lib/coffee-script.js"></script>
<script type="text/coffeescript">
	$(document).ready ->

		# Escape Code
		$('script[type=escapedCode]').each ->
			code = $(this).html()
			code = code.replace(/</g, '&lt;').replace(/>/g, '&gt;')

			preTag = $('<pre></pre>')
			codeTag = $('<code></code>')
			codeTag.html(code)
			preTag.append(codeTag)
			$(this).replaceWith(preTag)


		# OUTDENT CODE
		tabCharacter = String.fromCharCode(9)
		countNumberOfLeadingTabs = (line) ->
			numberOfLeadingTabs = 0
			for character in line
				if character == tabCharacter
					numberOfLeadingTabs++
				else
					return numberOfLeadingTabs;

			return numberOfLeadingTabs

		$('pre code').each ->
			code = $(this).html()


			numberOfLeadingTabs = Number.MAX_VALUE

			for line in code.split("\n")
				continue if line.match(/^\w*$/)
				tabs = countNumberOfLeadingTabs(line)
				numberOfLeadingTabs = tabs if tabs < numberOfLeadingTabs

			adjustedCode = []
			for line in code.split("\n")
				adjustedCode.push(line[numberOfLeadingTabs+1...line.length].replace(/\t/g, "   "))

			if adjustedCode[0].match(/^\w*$/)
				adjustedCode.shift()

			$(this).html(adjustedCode.join("\n"))

		# Content Editable
		$('code').attr('contenteditable', 'true')

		# Debug: Disable per-slide animations
		if window.location.search != '?presentation'
			$('.fragment').removeClass('fragment')


		# Parse the query string into a key/value object
		query = {};
		location.search.replace( /[A-Z0-9]+?=(\w*)/gi, (a)->
			query[ a.split( '=' ).shift() ] = a.split( '=' ).pop()
		)

		Reveal.initialize({
			# Display controls in the bottom right corner
			controls: true,

			# Display a presentation progress bar
			progress: true,

			# If true; each slide will be pushed to the browser history
			history: true,

			# Flags if mouse wheel navigation should be enabled
			mouseWheel: true,

			# Apply a 3D roll to links on hover
			rollingLinks: true,

			# UI style
			theme: query.theme || 'default', # default/neon

			# Transition style
			transition: query.transition || 'default' # default/cube/page/concave/linear(2d)
		});

		hljs.initHighlighting();
</script>
	</head>

	<body>

		<div id="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<section>
						<h1>TypoScript Harmony</h1>
						<h3 class="inverted">Revisiting TYPO3 Phoenix Content Rendering</h3>
						<p>by Sebastian Kurfürst</p>
						<p>for T3BOARD12</p>
						<p><small><b>Usage</b>: Slides are <b>nested</b> into other slides, press <b>&#x25BC;</b> to go to the nested slides.</small></p>
						<p><small>
							<script>
								if (window.location.search != '?presentation')
									document.write('<a href="?presentation">Switch to Presentation Mode</a></p>');
								else
									document.write('<a href="?foo">Switch to Static Mode</a></p>');
							</script>
							</small>
						<script>
							// Delicously hacky. Look away.
							if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) )
								document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
						</script>
					</section>
					<section>
						<h2>nested slide</h2>
						<p>Great, you were able to navigate to here!</p>
						<p>There is no further slide below, so press <b>&#x25BA;</b> to go to the next top-level slide.</p>
						<p><small><b>Hint:</b> at the bottom-right you see the navigation controls.</small></p>
					</section>
				</section>


				<!-- Inspiration -->
				<section>
					<section>
						<h2>Inspiration Sources</h2>

						<p>TypoScript v4: <b>extensibility, stdWrap</b></p>
						<p>Fluid: <b>HTML Templating</b></p>
						<p>JavaScript: <b>Prototype-based inheritance</b></p>
						<div class="fragment">
							<hr />
							<p>jQuery: <b>selecting nodes, fluent interface</b></p>
							<p>CSS: set-based API; <b>Selector Syntax</b></p>
							<p>XPath: <b>Traversal</b> Operations</p>
						</div>
					</section>
				</section>


				<!-- USERS PERSPECTIVE -->
				<section>
					<section>
						<h1>Usage Examples</h1>
					</section>
					<section>
						<h2>Render a static page template</h2>
						<script type="escapedCode">
							<html>
							<head>
								<f:section name="stylesheets">
									<!-- Style Sheets come here -->
								</f:section>
								<!-- Same for JS -->
							</head>
							<body>
							<f:section name="body">
								Main Menu: <typoScript:renderTypoScript path="parts/mainMenu" />

								Content: <typoScript:renderTypoScript path="sections/main" />
							</f:section>
							</body>
							</html>
						</script>
					</section>
					<section>
						<h2>Output the Page Title</h2>
						<script type="escapedCode">
							<!-- in the template -->
							...{title}...
						</script>
						<pre><code class="javascript">
							// Static Title
							page.body.title = 'My Static Title'

							// make it dynamic:
							page.body.title = ${context.attr('title')}
						</code></pre>
					</section>

					<section>
						<h2>Outputting Content</h2>

						<script type="escapedCode">
							<!-- in the template -->
							<typoScript:renderTypoScript path="sections/main" />
						</script>
						<pre><code class="javascript">
							page.body.sections.main = TYPO3.TYPO3:Section
							page.body.sections.main.nodePath = 'main'
						</code></pre>
					</section>

					<section>
						<h2>Adjusting Rendering Globally</h2>

						<p>Make the <b>headline texts static</b></p>
						<pre><code class="javascript">
							prototype(TYPO3.TYPO3:Text).headline = 'Static Headline'
						</code></pre>

						<div class="fragment">
							<p><b>Wrap</b> the headline texts<small> might be more useful :-)</small></p>
							<pre><code class="javascript">
								prototype(TYPO3.TYPO3:Text).headline << 1.wrap(prefix: '-', suffix: '-')
							</code></pre>
						</div>
					</section>

					<section>
						<h2>Adjusting Rendering Locally</h2>

						<p>Make the headline texts <b>inside all three-column elements</b> static</p>
						<pre><code class="javascript">
							prototype(TYPO3.Flow3Org:ThreeColumn).prototype(TYPO3.TYPO3:Text).headline = 'Static Headline'
						</code></pre>

						<div class="fragment">
							<p>Make the headline texts <b>inside the left column of all three-column elements</b> static</p>
							<pre><code class="javascript">
								prototype(TYPO3.Flow3Org:ThreeColumn).left.prototype(TYPO3.TYPO3:Text).headline = 'Static Headline'
							</code></pre>
						</div>

						<p>That's of course also possible with <b>processors :-)</b></b>
					</section>

					<section>
						<h2>Creating a custom Content Element</h2>

						<pre><code class="javascript">
							prototype(TYPO3.Flow3Org:TwoColumn) < prototype(TYPO3.TypoScript:FluidRenderer)
							prototype(TYPO3.Flow3Org:TwoColumn) {
								templatePath = 'resource://TYPO3.Flow3Org/Private/Templates/TypoScriptObjects/TwoColumn.html'
								left = TYPO3.TYPO3:Section
								left.nodePath = 'left'
								right = TYPO3.TYPO3:Section
								right.nodePath = 'right'
							}
						</code></pre>
						<script type="escapedCode">
							<!-- the template -->
							<ts:renderTypoScript path="left" />
							<ts:renderTypoScript path="right" />
						</script>
					</section>
				</section>

				<section>
					<h1>THE END</h1>
					<h3 class="inverted">BY Sebastian Kurfürst</h3>
					<p>Slides based on <a href="https://github.com/hakimel/reveal.js">reveal.js</a></p>
				</section>
			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<script src="js/reveal.js"></script>
		<script src="lib/highlight.js"></script>
	</body>
</html>